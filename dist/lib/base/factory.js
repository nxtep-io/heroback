"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ts_framework_common_1 = require("ts-framework-common");
const exporters_1 = require("../exporters");
const providers_1 = require("../providers");
const Utils = require("../utils");
exports.providerFactory = (options) => {
    const uri = Utils.Uri.parse(options.uri);
    if (uri.protocol === 'postgresql') {
        return new providers_1.PostgresProvider({ uri });
    }
    if (uri.protocol === 'mongo') {
        return new providers_1.MongoProvider({ uri });
    }
    throw new ts_framework_common_1.BaseError(`Unknown database provider: "${uri.protocol || undefined}"`, { uri });
};
exports.exporterFactory = (name) => {
    if (name === 'file') {
        return new exporters_1.FileExporter();
    }
    throw new ts_framework_common_1.BaseError(`Unknown exporter: "${name}"`, { exporter: name });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFjdG9yeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9iYXNlL2ZhY3RvcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2REFBZ0Q7QUFFaEQsNENBQTRDO0FBQzVDLDRDQUErRDtBQUMvRCxrQ0FBa0M7QUFJckIsUUFBQSxlQUFlLEdBQUcsQ0FBQyxPQUE0QixFQUFvQixFQUFFO0lBQ2hGLE1BQU0sR0FBRyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUV6QyxJQUFJLEdBQUcsQ0FBQyxRQUFRLEtBQUssWUFBWSxFQUFFO1FBQ2pDLE9BQU8sSUFBSSw0QkFBZ0IsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7S0FDdEM7SUFDRCxJQUFJLEdBQUcsQ0FBQyxRQUFRLEtBQUssT0FBTyxFQUFFO1FBQzVCLE9BQU8sSUFBSSx5QkFBYSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztLQUNuQztJQUNELE1BQU0sSUFBSSwrQkFBUyxDQUFDLCtCQUErQixHQUFHLENBQUMsUUFBUSxJQUFJLFNBQVMsR0FBRyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztBQUM1RixDQUFDLENBQUE7QUFFWSxRQUFBLGVBQWUsR0FBRyxDQUFDLElBQVksRUFBb0IsRUFBRTtJQUNoRSxJQUFJLElBQUksS0FBSyxNQUFNLEVBQUU7UUFDbkIsT0FBTyxJQUFJLHdCQUFZLEVBQUUsQ0FBQztLQUMzQjtJQUNELE1BQU0sSUFBSSwrQkFBUyxDQUFDLHNCQUFzQixJQUFJLEdBQUcsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQ3pFLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VFcnJvciB9IGZyb20gXCJ0cy1mcmFtZXdvcmstY29tbW9uXCI7XG5pbXBvcnQgeyBIZXJvYmFja1Byb3ZpZGVyIH0gZnJvbSBcIi4uL2Jhc2VcIjtcbmltcG9ydCB7IEZpbGVFeHBvcnRlciB9IGZyb20gXCIuLi9leHBvcnRlcnNcIjtcbmltcG9ydCB7IE1vbmdvUHJvdmlkZXIsIFBvc3RncmVzUHJvdmlkZXIgfSBmcm9tIFwiLi4vcHJvdmlkZXJzXCI7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCBIZXJvYmFja0V4cG9ydGVyIGZyb20gXCIuL2V4cG9ydGVyXCI7XG5pbXBvcnQgeyBIZXJvYmFja0R1bXBPcHRpb25zIH0gZnJvbSBcIi4uL2R1bXBcIjtcblxuZXhwb3J0IGNvbnN0IHByb3ZpZGVyRmFjdG9yeSA9IChvcHRpb25zOiBIZXJvYmFja0R1bXBPcHRpb25zKTogSGVyb2JhY2tQcm92aWRlciA9PiB7XG4gIGNvbnN0IHVyaSA9IFV0aWxzLlVyaS5wYXJzZShvcHRpb25zLnVyaSk7XG5cbiAgaWYgKHVyaS5wcm90b2NvbCA9PT0gJ3Bvc3RncmVzcWwnKSB7XG4gICAgcmV0dXJuIG5ldyBQb3N0Z3Jlc1Byb3ZpZGVyKHsgdXJpIH0pO1xuICB9XG4gIGlmICh1cmkucHJvdG9jb2wgPT09ICdtb25nbycpIHtcbiAgICByZXR1cm4gbmV3IE1vbmdvUHJvdmlkZXIoeyB1cmkgfSk7XG4gIH1cbiAgdGhyb3cgbmV3IEJhc2VFcnJvcihgVW5rbm93biBkYXRhYmFzZSBwcm92aWRlcjogXCIke3VyaS5wcm90b2NvbCB8fCB1bmRlZmluZWR9XCJgLCB7IHVyaSB9KTtcbn1cblxuZXhwb3J0IGNvbnN0IGV4cG9ydGVyRmFjdG9yeSA9IChuYW1lOiBzdHJpbmcpOiBIZXJvYmFja0V4cG9ydGVyID0+IHtcbiAgaWYgKG5hbWUgPT09ICdmaWxlJykge1xuICAgIHJldHVybiBuZXcgRmlsZUV4cG9ydGVyKCk7XG4gIH1cbiAgdGhyb3cgbmV3IEJhc2VFcnJvcihgVW5rbm93biBleHBvcnRlcjogXCIke25hbWV9XCJgLCB7IGV4cG9ydGVyOiBuYW1lIH0pO1xufSJdfQ==