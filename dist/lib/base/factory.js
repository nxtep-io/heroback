"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ts_framework_common_1 = require("ts-framework-common");
const exporters_1 = require("../exporters");
const Utils = require("../utils");
exports.providerFactory = (options, providers) => {
    const uri = Utils.Uri.parse(options.uri);
    if (uri.protocol === 'postgresql') {
        return new providers.PostgresProvider({ uri });
    }
    if (uri.protocol === 'mongo') {
        return new providers.MongoProvider({ uri });
    }
    throw new ts_framework_common_1.BaseError(`Unknown database provider: "${uri.protocol || undefined}"`, { uri });
};
exports.exporterFactory = (name) => {
    if (name === 'file') {
        return new exporters_1.FileExporter();
    }
    throw new ts_framework_common_1.BaseError(`Unknown exporter: "${name}"`, { exporter: name });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFjdG9yeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9iYXNlL2ZhY3RvcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2REFBZ0Q7QUFFaEQsNENBQTRDO0FBQzVDLGtDQUFrQztBQUdyQixRQUFBLGVBQWUsR0FBRyxDQUFDLE9BQXdCLEVBQUUsU0FBYyxFQUFvQixFQUFFO0lBQzVGLE1BQU0sR0FBRyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUV6QyxJQUFJLEdBQUcsQ0FBQyxRQUFRLEtBQUssWUFBWSxFQUFFO1FBQ2pDLE9BQU8sSUFBSSxTQUFTLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0tBQ2hEO0lBRUQsSUFBSSxHQUFHLENBQUMsUUFBUSxLQUFLLE9BQU8sRUFBRTtRQUM1QixPQUFPLElBQUksU0FBUyxDQUFDLGFBQWEsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7S0FDN0M7SUFFRCxNQUFNLElBQUksK0JBQVMsQ0FBQywrQkFBK0IsR0FBRyxDQUFDLFFBQVEsSUFBSSxTQUFTLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFDNUYsQ0FBQyxDQUFBO0FBRVksUUFBQSxlQUFlLEdBQUcsQ0FBQyxJQUFZLEVBQW9CLEVBQUU7SUFDaEUsSUFBSSxJQUFJLEtBQUssTUFBTSxFQUFFO1FBQ25CLE9BQU8sSUFBSSx3QkFBWSxFQUFFLENBQUM7S0FDM0I7SUFDRCxNQUFNLElBQUksK0JBQVMsQ0FBQyxzQkFBc0IsSUFBSSxHQUFHLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUN6RSxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlRXJyb3IgfSBmcm9tIFwidHMtZnJhbWV3b3JrLWNvbW1vblwiO1xuaW1wb3J0IHsgSGVyb2JhY2tQcm92aWRlciB9IGZyb20gXCIuLi9iYXNlXCI7XG5pbXBvcnQgeyBGaWxlRXhwb3J0ZXIgfSBmcm9tIFwiLi4vZXhwb3J0ZXJzXCI7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCBIZXJvYmFja0V4cG9ydGVyIGZyb20gXCIuL2V4cG9ydGVyXCI7XG5cbmV4cG9ydCBjb25zdCBwcm92aWRlckZhY3RvcnkgPSAob3B0aW9uczogeyB1cmk6IHN0cmluZyB9LCBwcm92aWRlcnM6IGFueSk6IEhlcm9iYWNrUHJvdmlkZXIgPT4ge1xuICBjb25zdCB1cmkgPSBVdGlscy5VcmkucGFyc2Uob3B0aW9ucy51cmkpO1xuXG4gIGlmICh1cmkucHJvdG9jb2wgPT09ICdwb3N0Z3Jlc3FsJykge1xuICAgIHJldHVybiBuZXcgcHJvdmlkZXJzLlBvc3RncmVzUHJvdmlkZXIoeyB1cmkgfSk7XG4gIH1cblxuICBpZiAodXJpLnByb3RvY29sID09PSAnbW9uZ28nKSB7XG4gICAgcmV0dXJuIG5ldyBwcm92aWRlcnMuTW9uZ29Qcm92aWRlcih7IHVyaSB9KTtcbiAgfVxuXG4gIHRocm93IG5ldyBCYXNlRXJyb3IoYFVua25vd24gZGF0YWJhc2UgcHJvdmlkZXI6IFwiJHt1cmkucHJvdG9jb2wgfHwgdW5kZWZpbmVkfVwiYCwgeyB1cmkgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBleHBvcnRlckZhY3RvcnkgPSAobmFtZTogc3RyaW5nKTogSGVyb2JhY2tFeHBvcnRlciA9PiB7XG4gIGlmIChuYW1lID09PSAnZmlsZScpIHtcbiAgICByZXR1cm4gbmV3IEZpbGVFeHBvcnRlcigpO1xuICB9XG4gIHRocm93IG5ldyBCYXNlRXJyb3IoYFVua25vd24gZXhwb3J0ZXI6IFwiJHtuYW1lfVwiYCwgeyBleHBvcnRlcjogbmFtZSB9KTtcbn0iXX0=