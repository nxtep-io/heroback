"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ts_framework_common_1 = require("ts-framework-common");
class HerobackProvider {
    constructor(options) {
        this.options = options;
        this.logger = options.logger || ts_framework_common_1.Logger.getInstance();
        // Clean the options uri undefined params
        Object.keys(this.options.uri).forEach(key => this.options.uri[key] === undefined && delete this.options.uri[key]);
        this.logger.debug(`Initializing provider for "${this.uriDefaults().protocol}" database`, {
            uri: this.uri
        });
    }
    get uri() {
        return Object.assign({}, this.uriDefaults(), this.options.uri);
    }
}
exports.default = HerobackProvider;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvdmlkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvYmFzZS9wcm92aWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLDZEQUE2QztBQVM3QyxNQUE4QixnQkFBZ0I7SUFJNUMsWUFBbUIsT0FBZ0M7UUFBaEMsWUFBTyxHQUFQLE9BQU8sQ0FBeUI7UUFDakQsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUMsTUFBTSxJQUFJLDRCQUFNLENBQUMsV0FBVyxFQUFFLENBQUM7UUFFckQseUNBQXlDO1FBQ3pDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBRSxHQUFHLENBQUMsS0FBSyxTQUFTLElBQUksT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBRSxHQUFHLENBQUMsQ0FBQyxDQUFBO1FBRXBILElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLDhCQUE4QixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsUUFBUSxZQUFZLEVBQUU7WUFDdkYsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHO1NBQ2QsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELElBQUksR0FBRztRQUNMLHlCQUFZLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBSyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRztJQUN4RCxDQUFDO0NBUUY7QUF6QkQsbUNBeUJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hpbGRQcm9jZXNzIH0gZnJvbSBcImNoaWxkX3Byb2Nlc3NcIjtcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ3RzLWZyYW1ld29yay1jb21tb24nO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHsgRHVtcE9wdGlvbnMsIFJlc3RvcmVPcHRpb25zIH0gZnJvbSBcIi4vb3B0aW9uc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEhlcm9iYWNrUHJvdmlkZXJPcHRpb25zIHtcbiAgdXJpOiBVdGlscy5VcmlQYXJhbXNTY2hlbWE7XG4gIGxvZ2dlcj86IExvZ2dlcjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgSGVyb2JhY2tQcm92aWRlciB7XG4gIHB1YmxpYyByZWFkb25seSBsb2dnZXI6IExvZ2dlcjtcbiAgcHVibGljIGFic3RyYWN0IHJlYWRvbmx5IGV4dDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBvcHRpb25zOiBIZXJvYmFja1Byb3ZpZGVyT3B0aW9ucykge1xuICAgIHRoaXMubG9nZ2VyID0gb3B0aW9ucy5sb2dnZXIgfHwgTG9nZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgXG4gICAgLy8gQ2xlYW4gdGhlIG9wdGlvbnMgdXJpIHVuZGVmaW5lZCBwYXJhbXNcbiAgICBPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMudXJpICkuZm9yRWFjaChrZXkgPT4gdGhpcy5vcHRpb25zLnVyaSBba2V5XSA9PT0gdW5kZWZpbmVkICYmIGRlbGV0ZSB0aGlzLm9wdGlvbnMudXJpIFtrZXldKVxuXG4gICAgdGhpcy5sb2dnZXIuZGVidWcoYEluaXRpYWxpemluZyBwcm92aWRlciBmb3IgXCIke3RoaXMudXJpRGVmYXVsdHMoKS5wcm90b2NvbH1cIiBkYXRhYmFzZWAsIHtcbiAgICAgIHVyaTogdGhpcy51cmlcbiAgICB9KTtcbiAgfVxuXG4gIGdldCB1cmkoKSB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy51cmlEZWZhdWx0cygpLCAuLi50aGlzLm9wdGlvbnMudXJpIH07XG4gIH1cblxuICBwdWJsaWMgYWJzdHJhY3QgdXJpRGVmYXVsdHMoKTogUGFydGlhbDxVdGlscy5VcmlQYXJhbXNTY2hlbWE+O1xuXG4gIHB1YmxpYyBhc3luYyBhYnN0cmFjdCBkdW1wKG9wdGlvbnM/OiBEdW1wT3B0aW9ucyk6IFByb21pc2U8Q2hpbGRQcm9jZXNzPjtcblxuICBwdWJsaWMgYXN5bmMgYWJzdHJhY3QgcmVzdG9yZShkdW1wOiBVdGlscy5JbnB1dFN0cmVhbSwgb3B0aW9uczogUmVzdG9yZU9wdGlvbnMpOiBQcm9taXNlPENoaWxkUHJvY2Vzcz47XG5cbn0iXX0=